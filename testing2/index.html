<!doctype html>
<html lang="en" data-lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Celebrate with Cake | H채agen-Dazs</title>
  <meta name="description" content="Order a H채agen-Dazs cake for pickup. Choose your design, flavors, and pickup time.">
  <link rel="canonical" href="https://www.hdicecream.com/cakes/order">
  <meta name="theme-color" content="#650B32">
  <link rel="stylesheet" href="/assets/css/site.css">
  <style>
    :root {
      --container: 920px;
      --radius-lg: 18px;
      --shadow-soft: 0 10px 30px rgba(0,0,0,0.08);
      --border-soft: 1px solid rgba(0,0,0,0.10);
      --text-muted: rgba(101, 11, 50, 0.72);
      --panel: rgba(249, 230, 195, 0.45);
    }
* { box-sizing: border-box; }

.container {
  max-width: var(--container);
  margin: 0 auto;
  padding: 0 20px;
}

.skip-link {
  position: absolute;
  left: -9999px;
  top: 10px;
  background: var(--hd-burgundy);
  color: var(--hd-white);
  padding: 10px 12px;
  border-radius: 10px;
  z-index: 9999;
  text-decoration: none;
  font-weight: 700;
}
.skip-link:focus { left: 10px; }

#siteHeader, #siteFooter { margin: 0; padding: 0; }

.hero-top-bg {
  background-image: url("/assets/images/placeholders/hd_tapestry_placeholder_white.jpg");
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  line-height: 0;
  margin: 0;
  padding: 0;
}
.hero-top-bg .spacer { min-height: 54px; display: block; }

.page-hero {
  background: var(--hd-white);
  padding: 26px 0 10px;
  border-bottom: 1px solid rgba(0,0,0,0.06);
}

.kicker {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-weight: 900;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 12px;
  color: rgba(101, 11, 50, 0.75);
  margin-bottom: 10px;
}

h1 {
  margin: 0 0 8px;
  font-size: 42px;
  line-height: 1.08;
  color: var(--hd-burgundy);
}

.sublead {
  margin: 0;
  color: var(--text-muted);
  font-size: 14px;
  line-height: 1.55;
  max-width: 85ch;
}

.info-card {
  margin-top: 14px;
  background: rgba(249, 230, 195, 0.30);
  border: 1px solid rgba(101, 11, 50, 0.14);
  border-radius: 14px;
  padding: 12px 12px;
  color: rgba(101, 11, 50, 0.90);
  font-size: 13px;
  line-height: 1.55;
}
.info-card strong { color: var(--hd-burgundy); }

.section {
  padding: 18px 0 34px;
  background: linear-gradient(180deg, rgba(249,230,195,0.20), rgba(255,255,255,1));
}

.form-card {
  background: var(--hd-white);
  border: var(--border-soft);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft);
  overflow: hidden;
}

.form-head {
  padding: 14px 16px;
  border-bottom: 1px solid rgba(0,0,0,0.08);
  background: rgba(249, 230, 195, 0.22);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.form-head .title {
  font-weight: 900;
  color: var(--hd-burgundy);
  letter-spacing: 0.02em;
}

.form-head-right {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  flex: 0 0 auto;
}

.help {
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.4;
}

.view-cakes-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 9px 12px;
  border-radius: 999px;
  text-decoration: none;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.02em;
  border: 1px solid rgba(101, 11, 50, 0.18);
  background: rgba(255,255,255,0.75);
  color: var(--hd-burgundy);
  white-space: nowrap;
}
.view-cakes-btn:hover,
.view-cakes-btn:focus {
  outline: none;
  background: rgba(249, 230, 195, 0.70);
  border-color: rgba(101, 11, 50, 0.26);
}

form { padding: 16px; }

.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-items: start;
}

.field { display: grid; gap: 6px; }

label {
  font-size: 12px;
  font-weight: 800;
  color: rgba(101, 11, 50, 0.85);
}

input, select, textarea {
  width: 100%;
  border: 1px solid rgba(101, 11, 50, 0.18);
  border-radius: 12px;
  padding: 11px 12px;
  font-size: 14px;
  color: rgba(31, 27, 28, 0.95);
  background: #fff;
  outline: none;
  font-family: var(--font-body);
}

input:focus, select:focus, textarea:focus {
  border-color: rgba(101, 11, 50, 0.38);
  box-shadow: 0 0 0 3px rgba(210, 153, 55, 0.18);
}

textarea {
  min-height: 110px;
  resize: vertical;
}

.full { grid-column: 1 / -1; }

.inline-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.counter {
  font-size: 12px;
  color: rgba(101, 11, 50, 0.70);
  font-weight: 800;
}

.actions {
  display: grid;
  justify-content: center;
  padding: 18px 16px 18px;
  border-top: 1px solid rgba(0,0,0,0.08);
  background: rgba(249, 230, 195, 0.14);
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 16px;
  border-radius: 12px;
  text-decoration: none;
  font-weight: 900;
  border: 0;
  cursor: pointer;
  user-select: none;
  font-family: var(--font-body);
  background: var(--hd-burgundy);
  color: var(--hd-white);
  box-shadow: var(--shadow-soft);
  min-width: 220px;
}

.btn:hover, .btn:focus {
  outline: none;
  background: rgba(101, 11, 50, 0.92);
}

.status {
  margin-top: 12px;
  text-align: center;
  font-size: 13px;
  color: rgba(101, 11, 50, 0.80);
}

.status.ok { color: rgba(14, 96, 45, 0.95); }
.status.err { color: rgba(150, 20, 40, 0.95); }

/* Cake preview (inline, lightweight) */
.design-block {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.preview-card {
  border: 1px solid rgba(101, 11, 50, 0.14);
  background: rgba(249, 230, 195, 0.16);
  border-radius: 14px;
  overflow: hidden;
  display: grid;
  grid-template-columns: 120px 1fr;
  gap: 12px;
  align-items: center;
  padding: 10px;
}

.preview-img {
  width: 120px;
  aspect-ratio: 1 / 1;
  background: #efe8db;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(0,0,0,0.08);
}

.preview-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.preview-meta {
  display: grid;
  gap: 6px;
  align-content: center;
  min-width: 0;
}

.preview-label {
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(101, 11, 50, 0.70);
}

.preview-name {
  font-weight: 900;
  color: var(--hd-burgundy);
  font-size: 14px;
  line-height: 1.25;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.preview-links {
  display: inline-flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}

.preview-link {
  font-size: 12px;
  font-weight: 900;
  color: var(--hd-burgundy);
  text-decoration: none;
  border-bottom: 1px solid rgba(101, 11, 50, 0.25);
  padding-bottom: 1px;
  line-height: 1.1;
}
.preview-link:hover,
.preview-link:focus {
  outline: none;
  border-bottom-color: rgba(101, 11, 50, 0.65);
}

.preview-hint {
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.35;
}

@media (max-width: 900px) {
  h1 { font-size: 38px; }
}

@media (max-width: 720px) {
  .grid { grid-template-columns: 1fr; }
  h1 { font-size: 34px; }
  .hero-top-bg .spacer { min-height: 46px; }
  .btn { width: 100%; min-width: 0; }
  .form-head { align-items: flex-start; }
  .form-head-right { flex-direction: column; align-items: flex-end; gap: 6px; }
  .preview-card { grid-template-columns: 96px 1fr; }
  .preview-img { width: 96px; }
}
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to main content</a>
  <div class="hero-top-bg" aria-hidden="true"><div class="spacer"></div></div>
  <div id="siteHeader"></div>
  <main id="main">
    <section class="page-hero" aria-label="Cake order header">
      <div class="container">
        <div class="kicker">Pickup info</div>
        <div class="info-card" id="pickupInfo">
          Orders placed require <strong>2 day(s)</strong> processing.<br>
          Earliest pickup: <strong id="earliestPickupText">Calculating...</strong>.<br>
          If needing sooner, contact store for inventory availability
        </div>
    <div style="height:14px;"></div>

    <h1>Celebrate with Cake</h1>
    <p class="sublead">
      Fill out this form and we will confirm your pickup details. If you need a faster pickup, contact the store for inventory availability.
    </p>
  </div>
</section>

<section class="section" aria-label="Cake order form section">
  <div class="container">
    <div class="form-card" role="region" aria-label="Cake order form card">
      <div class="form-head">
        <div class="title">Cake Order Form</div>
        <div class="form-head-right">
          <a class="view-cakes-btn" href="/cakes" target="_blank" rel="noopener noreferrer">View Cakes</a>
          <div class="help" id="minDateHint"></div>
        </div>
      </div>

      <form id="cakeOrderForm" novalidate>
        <div class="grid">
          <div class="field">
            <label for="firstName">First Name</label>
            <input id="firstName" name="first_name" type="text" autocomplete="given-name" required>
          </div>

          <div class="field">
            <label for="lastName">Last Name</label>
            <input id="lastName" name="last_name" type="text" autocomplete="family-name" required>
          </div>

          <div class="field">
            <label for="phone">Phone Number</label>
            <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="(786) 555-1212" required>
          </div>

          <div class="field">
            <label for="email">Email Address</label>
            <input id="email" name="email" type="email" autocomplete="email" required>
          </div>

          <div class="field full">
            <div class="design-block">
              <div class="field" style="margin:0;">
                <label for="cakeDesign">Cake Design</label>
                <select id="cakeDesign" name="cake_design" required>
                  <option value="" selected disabled>Select a cake design</option>
                  <option>Ribbon Cake</option>
                  <option>Dulce de Leche Cake</option>
                  <option>Coffee Crunch Cake</option>
                  <option>Rose's Birthday Cake</option>
                  <option>Cookies and Cream Cake</option>
                  <option>Triple Chocolate Cake</option>
                  <option>Just Because Cake</option>
                  <option>Reuben's Birthday Cake</option>
                </select>
              </div>

              <div class="preview-card" aria-label="Selected cake preview" id="cakePreviewCard">
                <div class="preview-img" aria-hidden="true">
                  <img id="cakePreviewImg" src="/assets/images/placeholders/hd_cakes_01.png" alt="">
                </div>
                <div class="preview-meta">
                  <div class="preview-label">Selected cake</div>
                  <div class="preview-name" id="cakePreviewName">Choose a cake design to preview</div>
                  <div class="preview-links">
                    <a class="preview-link" href="/cakes" target="_blank" rel="noopener noreferrer">View all cakes</a>
                  </div>
                  <div class="preview-hint">This preview updates when you change the Cake Design.</div>
                </div>
              </div>
            </div>
          </div>

          <div class="field">
            <label for="cakeSize">Cake Size</label>
            <select id="cakeSize" name="cake_size" required>
              <option value="" selected disabled>Select a cake size</option>
              <option>2x6 (serves 6-8)</option>
              <option>2x8 (serves 12-15)</option>
            </select>
          </div>

          <div class="field">
            <label for="flavorDistribution">Flavor Distribution</label>
            <select id="flavorDistribution" name="flavor_distribution" required>
              <option selected>Layered</option>
            </select>
          </div>

          <div class="field">
            <label for="firstFlavor">First Flavor</label>
            <select id="firstFlavor" name="first_flavor" required></select>
          </div>

          <div class="field">
            <label for="secondFlavor">Second Flavor</label>
            <select id="secondFlavor" name="second_flavor" required></select>
          </div>

          <div class="field">
            <label for="pickupDate">Pick Up Date</label>
            <input id="pickupDate" name="pickup_date" type="date" required>
            <div class="help">Earliest available date is auto-set.</div>
          </div>

          <div class="field">
            <label for="pickupTime">Pick Up Time</label>
            <input id="pickupTime" name="pickup_time" type="time" step="900" required>
            <div class="help">15-minute increments for easier scheduling.</div>
          </div>

          <div class="field full">
            <label for="pickupLocation">Pick Up Location</label>
            <select id="pickupLocation" name="pickup_location" required>
              <option value="" selected disabled>Select pickup location</option>
              <option>H채agen-Dazs North Miami (Causeway Square)</option>
              <option>H채agen-Dazs North Beach (6978 Collins Ave)</option>
            </select>
          </div>

          <div class="field full">
            <label for="messageChoice">Message on the Cake</label>
            <select id="messageChoice" name="message_on_cake_choice" required>
              <option value="" selected disabled>Select a message</option>
              <option>Happy Birthday</option>
              <option>Custom - write in Special Instructions</option>
            </select>
            <div class="help" id="messageHelp">If you choose Custom, write the exact message in Special Instructions.</div>
          </div>

          <div class="field full" id="customMessageWrap" style="display:none;">
            <label for="customMessage">Custom Message on the Cake</label>
            <input id="customMessage" name="custom_message_on_cake" type="text" placeholder="Example: Congrats Maria">
            <div class="help">Optional. You can also write this in Special Instructions.</div>
          </div>

          <div class="field full">
            <div class="inline-row">
              <label for="specialInstructions">Special Instructions</label>
              <div class="counter" id="charCounter">0 / 500</div>
            </div>
            <textarea id="specialInstructions" name="special_instructions" maxlength="500" placeholder="Allergies, custom message, pickup notes, decorations, etc."></textarea>
            <div class="help">500 character limit.</div>
          </div>
        </div>

        <div class="actions">
          <button class="btn" type="submit" id="submitBtn">Submit Form</button>
          <div class="status" id="statusMsg" aria-live="polite"></div>
        </div>
      </form>
    </div>
  </div>
</section>
  </main>
  <div id="siteFooter"></div>
  <script>
    (function () {
      function loadInto(id, url) {
        var el = document.getElementById(id);
        if (!el) return;
        fetch(url, { cache: "no-cache" })
          .then(function (r) { return r.text(); })
          .then(function (html) { el.innerHTML = html; })
          .catch(function () { el.innerHTML = ""; });
      }

      var docLang = document.documentElement.getAttribute("lang") || "en";
      var isEs = docLang.toLowerCase().indexOf("es") === 0;

      var headerUrl = isEs ? "/assets/includes/header-es.html" : "/assets/includes/header.html";
      var footerUrl = isEs ? "/assets/includes/footer-es.html" : "/assets/includes/footer.html";

      loadInto("siteHeader", headerUrl);
      loadInto("siteFooter", footerUrl);
    })();
  </script>
  <script>
    (function () {
      var WEB_APP_URL = "https://script.google.com/a/macros/klizos.com/s/AKfycbx0aYS-y84nQkUt-uNKDh_y5IcvGdKhTiF02mkjEaPWmcB4dDQ70u8S06GDJd9CtSRMXA/exec";
      var PROCESSING_DAYS = 2;

      var flavors = [
        "Chocolate",
        "Dulce De Leche",
        "Mango",
        "Strawberry",
        "Raspberry",
        "Brownies A La Mode",
        "Butter Pecan",
        "Caramel Cone",
        "Coffee",
        "Cookie Dough Dynamo",
        "Cookies & Cream",
        "Midnight Cookies & Cream",
        "Mint Chip",
        "Pineapple Coconut",
        "Pralines & Cream",
        "Rocky Road",
        "Rum Raisin",
        "Vanilla",
        "Vanilla Chip",
        "Vanilla Swiss Almond",
        "White Chocolate Raspberry",
        "Irish Cream Brownie",
        "Belgian Chocolate",
        "Coffee Chip",
        "Pistachio",
        "New York Strawberry Cheesecake"
      ];

      var firstFlavor = document.getElementById("firstFlavor");
      var secondFlavor = document.getElementById("secondFlavor");
      var pickupDate = document.getElementById("pickupDate");
      var earliestPickupText = document.getElementById("earliestPickupText");
      var minDateHint = document.getElementById("minDateHint");

      var firstName = document.getElementById("firstName");
      var lastName = document.getElementById("lastName");
      var phone = document.getElementById("phone");
      var messageChoice = document.getElementById("messageChoice");
      var customMessageWrap = document.getElementById("customMessageWrap");
      var specialInstructions = document.getElementById("specialInstructions");
      var charCounter = document.getElementById("charCounter");

      var cakeDesign = document.getElementById("cakeDesign");
      var cakePreviewImg = document.getElementById("cakePreviewImg");
      var cakePreviewName = document.getElementById("cakePreviewName");

      var form = document.getElementById("cakeOrderForm");
      var statusMsg = document.getElementById("statusMsg");
      var submitBtn = document.getElementById("submitBtn");

      function pad2(n) { return (n < 10 ? "0" : "") + n; }

      function addDays(d, days) {
        var x = new Date(d.getTime());
        x.setDate(x.getDate() + days);
        return x;
      }

      function formatLongDate(d) {
        var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
        var months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
        return days[d.getDay()] + ", " + months[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear();
      }

      function formatISODate(d) {
        return d.getFullYear() + "-" + pad2(d.getMonth() + 1) + "-" + pad2(d.getDate());
      }

      function setEarliestPickup() {
        var today = new Date();
        var earliest = addDays(today, PROCESSING_DAYS);
        var iso = formatISODate(earliest);
        pickupDate.min = iso;
        if (!pickupDate.value) pickupDate.value = iso;

        earliestPickupText.textContent = formatLongDate(earliest);
        minDateHint.textContent = "Earliest pickup date: " + iso;
      }

      function fillFlavorSelect(selectEl) {
        selectEl.innerHTML = "";
        var opt0 = document.createElement("option");
        opt0.value = "";
        opt0.textContent = "Select a flavor";
        opt0.disabled = true;
        opt0.selected = true;
        selectEl.appendChild(opt0);

        for (var i = 0; i < flavors.length; i++) {
          var opt = document.createElement("option");
          opt.value = flavors[i];
          opt.textContent = flavors[i];
          selectEl.appendChild(opt);
        }
      }

      function capFirst(s) {
        s = String(s || "").trim();
        if (!s) return "";
        return s.charAt(0).toUpperCase() + s.slice(1);
      }

      function formatPhone(value) {
        var digits = String(value || "").replace(/\D/g, "").slice(0, 10);
        if (digits.length === 0) return "";
        if (digits.length < 4) return "(" + digits;
        if (digits.length < 7) return "(" + digits.slice(0,3) + ") " + digits.slice(3);
        return "(" + digits.slice(0,3) + ") " + digits.slice(3,6) + "-" + digits.slice(6);
      }

      function setStatus(text, kind) {
        statusMsg.textContent = text || "";
        statusMsg.className = "status" + (kind ? " " + kind : "");
      }

      function toggleCustomMessage() {
        var v = messageChoice.value || "";
        if (v.indexOf("Custom") === 0) {
          customMessageWrap.style.display = "grid";
        } else {
          customMessageWrap.style.display = "none";
        }
      }

      function updateCounter() {
        var n = (specialInstructions.value || "").length;
        charCounter.textContent = n + " / 500";
      }

      function slugifyCakeName(name) {
        return String(name || "")
          .toLowerCase()
          .replace(/&/g, "and")
          .replace(/'/g, "")
          .replace(/[^a-z0-9]+/g, "-")
          .replace(/(^-|-$)/g, "");
      }

      /*
        Preview image mapping
        Recommended: put your real cake images here once available, e.g.
        "/assets/images/cakes/ribbon-cake.jpg"

        For now: it falls back to a safe placeholder.
      */
      function getCakeImageUrl(cakeName) {
        var slug = slugifyCakeName(cakeName);
        var map = {
          "ribbon-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "dulce-de-leche-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "coffee-crunch-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "roses-birthday-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "cookies-and-cream-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "triple-chocolate-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "just-because-cake": "/assets/images/placeholders/hd_cakes_01.png",
          "reubens-birthday-cake": "/assets/images/placeholders/hd_cakes_01.png"
        };
        return map[slug] || "/assets/images/placeholders/hd_cakes_01.png";
      }

      function updateCakePreview() {
        var selected = (cakeDesign.value || "").trim();
        if (!selected) {
          cakePreviewName.textContent = "Choose a cake design to preview";
          cakePreviewImg.src = "/assets/images/placeholders/hd_cakes_01.png";
          cakePreviewImg.alt = "";
          return;
        }
        cakePreviewName.textContent = selected;
        cakePreviewImg.src = getCakeImageUrl(selected);
        cakePreviewImg.alt = selected;
      }

      fillFlavorSelect(firstFlavor);
      fillFlavorSelect(secondFlavor);
      setEarliestPickup();
      toggleCustomMessage();
      updateCounter();
      updateCakePreview();

      firstName.addEventListener("blur", function () { firstName.value = capFirst(firstName.value); });
      lastName.addEventListener("blur", function () { lastName.value = capFirst(lastName.value); });

      phone.addEventListener("input", function () {
        phone.value = formatPhone(phone.value);
      });

      messageChoice.addEventListener("change", toggleCustomMessage);
      specialInstructions.addEventListener("input", updateCounter);
      cakeDesign.addEventListener("change", updateCakePreview);

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        setStatus("", "");

        if (!WEB_APP_URL) {
          setStatus("Web App URL is not set yet.", "err");
          return;
        }

        var data = {
          first_name: (document.getElementById("firstName").value || "").trim(),
          last_name: (document.getElementById("lastName").value || "").trim(),
          phone: (document.getElementById("phone").value || "").trim(),
          email: (document.getElementById("email").value || "").trim(),
          cake_design: (document.getElementById("cakeDesign").value || "").trim(),
          cake_size: (document.getElementById("cakeSize").value || "").trim(),
          first_flavor: (document.getElementById("firstFlavor").value || "").trim(),
          second_flavor: (document.getElementById("secondFlavor").value || "").trim(),
          flavor_distribution: (document.getElementById("flavorDistribution").value || "").trim(),
          pickup_date: (document.getElementById("pickupDate").value || "").trim(),
          pickup_time: (document.getElementById("pickupTime").value || "").trim(),
          pickup_location: (document.getElementById("pickupLocation").value || "").trim(),
          message_on_cake_choice: (document.getElementById("messageChoice").value || "").trim(),
          custom_message_on_cake: (document.getElementById("customMessage").value || "").trim(),
          special_instructions: (document.getElementById("specialInstructions").value || "").trim()
        };

        var required = [
          "first_name","last_name","phone","email","cake_design","cake_size",
          "first_flavor","second_flavor","flavor_distribution",
          "pickup_date","pickup_time","pickup_location","message_on_cake_choice"
        ];

        var missing = [];
        for (var i = 0; i < required.length; i++) {
          if (!String(data[required[i]] || "").trim()) missing.push(required[i]);
        }

        if (missing.length) {
          setStatus("Please complete all required fields before submitting.", "err");
          return;
        }

        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";
        setStatus("Submitting your order request...", "");

        fetch(WEB_APP_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        })
        .then(function (r) { return r.json(); })
        .then(function (res) {
          if (res && res.ok) {
            setStatus("Success. Your order request was received. A confirmation email was sent.", "ok");
            form.reset();
            fillFlavorSelect(firstFlavor);
            fillFlavorSelect(secondFlavor);
            setEarliestPickup();
            toggleCustomMessage();
            updateCounter();
            updateCakePreview();
          } else {
            setStatus("Could not submit. " + (res && res.error ? res.error : "Please try again."), "err");
          }
        })
        .catch(function () {
          setStatus("Network error. Please try again.", "err");
        })
        .finally(function () {
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Form";
        });
      });
    })();
  </script>
</body>
</html>

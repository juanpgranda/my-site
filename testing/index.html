<!doctype html>
<html lang="en" data-lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Celebrate with Cake | Haagen-Dazs</title>
  <meta name="description" content="Order a Haagen-Dazs ice cream cake for pickup. Choose your cake design, flavors, and pickup time, and we will confirm your order details.">
  <link rel="canonical" href="https://www.hdicecream.com/cakes/order-form/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Haagen-Dazs">
  <meta property="og:title" content="Celebrate with Cake | Haagen-Dazs">
  <meta property="og:description" content="Order a Haagen-Dazs ice cream cake for pickup. Choose your cake design, flavors, and pickup time, and we will confirm your order details.">
  <meta property="og:url" content="https://www.hdicecream.com/cakes/order-form/">
  <meta property="og:image" content="https://www.hdicecream.com/assets/images/hd_og_image.jpg">
  <meta property="og:image:secure_url" content="https://www.hdicecream.com/assets/images/hd_og_image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Haagen-Dazs cake order form for pickup.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Celebrate with Cake | Haagen-Dazs">
  <meta name="twitter:description" content="Order a Haagen-Dazs ice cream cake for pickup. Choose your cake design, flavors, and pickup time, and we will confirm your order details.">
  <meta name="twitter:image" content="https://www.hdicecream.com/assets/images/hd_og_image.jpg">
  <link rel="icon" href="/assets/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">
  <link rel="manifest" href="/assets/images/site.webmanifest">
  <meta name="theme-color" content="#650B32">
  <link rel="stylesheet" href="/assets/css/site.css">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JJ3XB37TBM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag("js", new Date());
    gtag("config", "G-JJ3XB37TBM");
  </script>
  <style>
    :root {
      --container: 920px;
      --radius-lg: 18px;
      --shadow-soft: 0 10px 30px rgba(0,0,0,0.08);
      --border-soft: 1px solid rgba(0,0,0,0.10);
      --text-muted: rgba(101, 11, 50, 0.72);
    }
    * { box-sizing: border-box; }
    .container { max-width: var(--container); margin: 0 auto; padding: 0 var(--container-pad); }
    .skip-link {
      position: absolute; left: -9999px; top: 10px;
      background: var(--hd-burgundy); color: var(--hd-white);
      padding: 10px 12px; border-radius: 0; z-index: 9999;
      text-decoration: none; font-weight: 700;
    }
    .skip-link:focus { left: 10px; }
    #siteHeader, #siteFooter { margin: 0; padding: 0; }
    .page-hero { background: var(--hd-white); padding: 26px 0 10px; border-bottom: 1px solid rgba(0,0,0,0.06); }
    .kicker {
      display: inline-flex; align-items: center; gap: 10px;
      font-weight: 900; letter-spacing: 0.08em; text-transform: uppercase;
      font-size: 12px; color: rgba(101, 11, 50, 0.75); margin-bottom: 10px;
    }
    h1 { margin: 0 0 8px; font-size: 42px; line-height: 1.08; color: var(--hd-burgundy); }
    .sublead { margin: 0; color: var(--text-muted); font-size: 16px; line-height: 1.55; max-width: 85ch; }
    .info-card {
      margin-top: 14px; background: rgba(249, 230, 195, 0.30);
      border: 1px solid rgba(101, 11, 50, 0.14);
      border-radius: 0; padding: 12px 12px;
      color: rgba(101, 11, 50, 0.90);
      font-size: 13px; line-height: 1.55;
    }
    .info-card strong { color: var(--hd-burgundy); }
    .info-card a { color: var(--hd-burgundy); text-decoration: underline; font-weight: 800; }
    .info-card a:hover, .info-card a:focus { outline: none; text-decoration-thickness: 2px; }
    .pickup-link { color: var(--hd-burgundy); text-decoration: underline; font-weight: 800; }
    .pickup-link:hover, .pickup-link:focus { outline: none; text-decoration-thickness: 2px; }
    .section { padding: 18px 0 34px; background: var(--band-gold-bg); border-top: 1px solid rgba(0,0,0,0.06); border-bottom: 1px solid rgba(0,0,0,0.06); }
    .form-card { background: var(--hd-white); border: var(--border-soft); border-radius: 0; box-shadow: var(--shadow-soft); overflow: hidden; }
    .form-head {
      padding: 14px 16px; border-bottom: 1px solid rgba(0,0,0,0.08);
      background: rgba(249, 230, 195, 0.22);
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
    }
    .form-head .title { font-weight: 900; color: var(--hd-burgundy); letter-spacing: 0.02em; }
    .form-head .right { display: inline-flex; align-items: center; gap: 10px; flex: 0 0 auto; }
    .help { font-size: 12px; color: var(--text-muted); line-height: 1.4; }
    .view-cakes-btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 9px 12px; border-radius: var(--radius-btn);
      text-decoration: none; font-weight: 900; font-size: 12px;
      letter-spacing: 0.02em;
      border: 1px solid rgba(101, 11, 50, 0.18);
      background: rgba(255,255,255,0.78);
      color: var(--hd-burgundy);
      white-space: nowrap;
    }
    .view-cakes-btn:hover, .view-cakes-btn:focus { outline: none; background: rgba(249, 230, 195, 0.75); border-color: rgba(101, 11, 50, 0.26); }
    form { padding: 16px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items: start; }
    .field { display: grid; gap: 6px; min-width: 0; }
    label { font-size: 12px; font-weight: 800; color: rgba(101, 11, 50, 0.85); }
    input, select, textarea {
      width: 100%;
      border: 1px solid rgba(101, 11, 50, 0.18);
      border-radius: 0;
      padding: 11px 12px;
      font-size: 14px;
      color: rgba(31, 27, 28, 0.95);
      background: #fff;
      outline: none;
      font-family: var(--font-body);
    }
    input:focus, select:focus, textarea:focus { border-color: rgba(101, 11, 50, 0.38); box-shadow: 0 0 0 3px rgba(210, 153, 55, 0.18); }
    textarea { min-height: 110px; resize: vertical; }
    .full { grid-column: 1 / -1; }
    .inline-row { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
    .counter { font-size: 12px; color: rgba(101, 11, 50, 0.70); font-weight: 800; }
    .actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      padding: 18px 16px 18px;
      border-top: 1px solid rgba(0,0,0,0.08);
      background: rgba(249, 230, 195, 0.14);
    }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 12px 16px;
      border-radius: var(--radius-btn);
      text-decoration: none; font-weight: 900;
      border: 0; cursor: pointer; user-select: none;
      font-family: var(--font-body);
      background: var(--hd-burgundy); color: var(--hd-white);
      box-shadow: var(--shadow-soft);
      min-width: 220px;
    }
    .btn:hover, .btn:focus { outline: none; background: rgba(101, 11, 50, 0.92); }
    .status {
      margin-top: 0;
      text-align: center;
      font-size: 13px;
      line-height: 1.4;
      color: rgba(101, 11, 50, 0.80);
      max-width: 520px;
    }
    .status.ok { color: rgba(14, 96, 45, 0.95); }
    .status.err { color: rgba(150, 20, 40, 0.95); }
    .design-row { display: grid; grid-template-columns: 1fr; gap: 10px; }
    .preview-card {
      border: 1px solid rgba(101, 11, 50, 0.14);
      background: rgba(249, 230, 195, 0.16);
      border-radius: 0;
      overflow: hidden;
      display: grid;
      grid-template-columns: 120px 1fr;
      gap: 12px;
      align-items: center;
      padding: 10px;
    }
    .preview-img {
      width: 120px;
      aspect-ratio: 1 / 1;
      background: #efe8db;
      border-radius: 0;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.08);
    }
    .preview-img img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .preview-meta { display: grid; gap: 6px; align-content: center; min-width: 0; }
    .preview-label { font-size: 11px; font-weight: 900; letter-spacing: 0.08em; text-transform: uppercase; color: rgba(101, 11, 50, 0.70); }
    .preview-name { font-weight: 900; color: var(--hd-burgundy); font-size: 14px; line-height: 1.25; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .preview-links { display: inline-flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    .preview-link {
      font-size: 12px; font-weight: 900;
      color: var(--hd-burgundy);
      text-decoration: none;
      border-bottom: 1px solid rgba(101, 11, 50, 0.25);
      padding-bottom: 1px;
      line-height: 1.1;
    }
    .preview-link:hover, .preview-link:focus { outline: none; border-bottom-color: rgba(101, 11, 50, 0.65); }
    .preview-hint { font-size: 12px; color: var(--text-muted); line-height: 1.35; }
    select {
      -webkit-appearance: none; -moz-appearance: none; appearance: none;
      padding-right: 44px;
      background-color: #fff;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'%3E%3Cpath fill='%23650B32' d='M7 10l5 5l5-5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      background-size: 16px 16px;
    }
    select::-ms-expand { display: none; }
    .time-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; align-items: center; }
    .time-grid select { min-width: 0; }
    @media (max-width: 900px) { h1 { font-size: 38px; } }
    @media (max-width: 720px) {
      .grid { grid-template-columns: 1fr; }
      h1 { font-size: 34px; }
      .btn { width: 100%; min-width: 0; }
      .form-head { align-items: flex-start; }
      .form-head .right { flex-direction: column; align-items: flex-end; gap: 6px; }
      .preview-card { grid-template-columns: 96px 1fr; }
      .preview-img { width: 96px; }
      .time-grid { grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to main content</a>
  <div id="siteHeader"></div>
  <main id="main">
    <section class="page-hero" aria-label="Cake order header">
      <div class="container">
        <div class="kicker">Pickup info</div>
        <div class="info-card" id="pickupInfo">
          Orders placed require <strong>2 day(s)</strong> for processing<br>
          Earliest pickup: <strong id="earliestPickupText">Calculating...</strong><br>
          If needed sooner, please contact shop for current inventory availability <a href="/locations" class="pickup-link">Locations</a><br>
          All flavors are manufactured Kosher from factory<br>
          Cakes are assembled and decorated in the shop<br>
          GF = Gluten Free
        </div>
        <div style="height:14px;"></div>
        <h1>Celebrate with Cake</h1>
        <p class="sublead">
          Fill out this form and we will confirm your pickup details. If you need a faster pickup, contact the store for inventory availability.
        </p>
      </div>
    </section>
<section class="section" aria-label="Cake order form section">
  <div class="container">
    <div class="form-card" role="region" aria-label="Cake order form card">
      <div class="form-head">
        <div class="title">Cake Order Form</div>
        <div class="right">
          <a class="view-cakes-btn" href="/cakes" target="_blank" rel="noopener noreferrer">View Cakes</a>
          <div class="help" id="minDateHint"></div>
        </div>
      </div>

      <form id="cakeOrderForm" novalidate>
        <div class="grid">
          <div class="field">
            <label for="firstName">First Name</label>
            <input id="firstName" name="first_name" type="text" autocomplete="given-name" required>
          </div>

          <div class="field">
            <label for="lastName">Last Name</label>
            <input id="lastName" name="last_name" type="text" autocomplete="family-name" required>
          </div>

          <div class="field">
            <label for="phone">Phone Number</label>
            <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="(XXX) XXX-XXXX" required>
          </div>

          <div class="field">
            <label for="email">Email Address</label>
            <input id="email" name="email" type="email" autocomplete="email" required>
          </div>

          <div class="field full">
            <div class="design-row">
              <div class="field" style="margin:0;">
                <label for="cakeDesign">Cake Design</label>
                <select id="cakeDesign" name="cake_design" required>
                  <option value="" selected disabled>Select a cake design</option>
                  <option>Ribbon Cake</option>
                  <option>Dulce de Leche Cake</option>
                  <option>Coffee Crunch Cake</option>
                  <option>Rose's Birthday Cake</option>
                  <option>Reuben's Birthday Cake</option>
                  <option>Cookies &amp; Cream Cake</option>
                  <option>Triple Chocolate Cake</option>
                  <option>Just Because Cake</option>
                </select>
              </div>

              <div class="preview-card" aria-label="Selected cake preview" id="cakePreviewCard">
                <div class="preview-img" aria-hidden="true">
                  <img id="cakePreviewImg" src="/assets/images/cakes/RibbonCake_Whole_041725.jpg" alt="">
                </div>
                <div class="preview-meta">
                  <div class="preview-label">Selected cake</div>
                  <div class="preview-name" id="cakePreviewName">Choose a cake design to preview</div>
                  <div class="preview-links">
                    <a class="preview-link" href="/cakes" target="_blank" rel="noopener noreferrer">View all cakes</a>
                  </div>
                  <div class="preview-hint">Preview updates when you change the Cake Design.</div>
                </div>
              </div>
            </div>
          </div>

          <div class="field">
            <label for="cakeSize">Cake Size</label>
            <select id="cakeSize" name="cake_size" required>
              <option value="" selected disabled>Select a cake size</option>
              <option>6x2 (serves 6-8)</option>
              <option>6x3 (serves 9-12)</option>
              <option>8x2 (serves 12-16)</option>
              <option>8x3 (serves 16-20)</option>
              <option>10x2 (serves 20-24)</option>
              <option>10x3 (serves 24-32)</option>
            </select>
          </div>

          <div class="field">
            <label for="flavorDistribution">Flavor Distribution</label>
            <select id="flavorDistribution" name="flavor_distribution" required>
              <option selected>Layered</option>
            </select>
          </div>

          <div class="field">
            <label for="firstFlavor">First Flavor</label>
            <select id="firstFlavor" name="first_flavor" required></select>
          </div>

          <div class="field">
            <label for="secondFlavor">Second Flavor</label>
            <select id="secondFlavor" name="second_flavor" required></select>
          </div>

          <div class="field">
            <label for="pickupDate">Pick Up Date</label>
            <input id="pickupDate" name="pickup_date" type="date" required>
            <div class="help">Earliest available date is auto-set.</div>
          </div>

          <div class="field">
            <label for="pickupHour">Pick Up Time</label>
            <div class="time-grid" aria-label="Pickup time selectors">
              <select id="pickupHour" aria-label="Pickup hour" required></select>
              <select id="pickupMinute" aria-label="Pickup minutes" required></select>
            </div>
            <input id="pickupTime" name="pickup_time" type="hidden" required>
            <div class="help">Pick up available: 11:00 AM until closing time. Please check store hours in <a href="/locations" class="pickup-link">Locations</a></div>
          </div>

          <div class="field full">
            <label for="pickupLocation">Pick Up Location</label>
            <select id="pickupLocation" name="pickup_location" required>
              <option value="" selected disabled>Select pickup location</option>
              <option>Haagen-Dazs North Miami (Causeway Square/1809 NE 123rd Street)</option>
              <option>Haagen-Dazs North Beach (6978 Collins Ave)</option>
            </select>
          </div>

          <div class="field full">
            <label for="messageChoice">Message on the Cake</label>
            <select id="messageChoice" name="message_on_cake_choice" required>
              <option value="" selected disabled>Select a message</option>
              <option>Happy Birthday</option>
              <option>Custom - write in Special Instructions</option>
            </select>
            <div class="help" id="messageHelp">If you choose Custom, write on "Custom Message on the Cake."</div>
          </div>

          <div class="field full" id="customMessageWrap" style="display:none;">
            <label for="customMessage">Custom Message on the Cake</label>
            <input id="customMessage" name="custom_message_on_cake" type="text" placeholder="Example: Congrats Maria">
            <div class="help">Optional. You can also write this in Special Instructions.</div>
          </div>

          <div class="field full">
            <div class="inline-row">
              <label for="specialInstructions">Special Instructions</label>
              <div class="counter" id="charCounter">0 / 500</div>
            </div>
            <textarea id="specialInstructions" name="special_instructions" maxlength="500" placeholder="Allergies, custom message, pickup notes, decorations, etc."></textarea>
            <div class="help">500 character limit.</div>
          </div>
        </div>

        <div class="actions">
          <button class="btn" type="submit" id="submitBtn">Submit Form</button>
          <div class="status" id="statusMsg" aria-live="polite"></div>
        </div>
      </form>

      <iframe id="submitFrame" name="submitFrame" style="display:none;" title="Submission frame"></iframe>
    </div>
  </div>
</section>
  </main>
  <div id="siteFooter"></div>
  <script>
    (function () {
      function loadInto(id, url) {
        var el = document.getElementById(id);
        if (!el) return;
        fetch(url, { cache: "no-cache" })
          .then(function (r) { return r.text(); })
          .then(function (html) { el.innerHTML = html; })
          .catch(function () { el.innerHTML = ""; });
      }
      loadInto("siteHeader", "/assets/includes/header.html");
      loadInto("siteFooter", "/assets/includes/footer.html");
    })();
  </script>
  <script>
    (function () {
      var WEB_APP_URL = "https://script.google.com/macros/s/AKfycby0iumR07OyUWmmkdjcRPRaqqSGBJ-wHGdyP4lPPYCjxOppbJFXnkyzOjVbFRU49QwY/exec";
      var PROCESSING_DAYS = 2;

      var flavors = [
        { name: "Cookies n' Cream", gf: false },
        { name: "Midnight Cookies n' Cream", gf: false },
        { name: "Chocolate", gf: true },
        { name: "Belgian Chocolate", gf: true },
        { name: "Vanilla", gf: true },
        { name: "Vanilla Choc Chip", gf: true },
        { name: "Dulce de Leche", gf: true },
        { name: "Cookie Dough Choc Chip", gf: false },
        { name: "Rocky Road", gf: true },
        { name: "Brownies a la Mode", gf: false },
        { name: "Coffee", gf: true },
        { name: "Coffee Chip", gf: true },
        { name: "Pralines n' Cream", gf: false },
        { name: "(Vanilla Caramel Pecan)", gf: false },
        { name: "Strawberry", gf: true },
        { name: "Dark Cherry Truffle", gf: false },
        { name: "NY Strawberry Cheesecake", gf: false },
        { name: "Pistachio", gf: true },
        { name: "Butter Pecan", gf: true },
        { name: "Irish Cream Brownie", gf: false },
        { name: "Mint Chip", gf: true },
        { name: "Caramel Cone", gf: false },
        { name: "Pineapple Coconut", gf: true },
        { name: "Rum Raisin", gf: true },
        { name: "Mango Sorbet", gf: true },
        { name: "Strawberry Sorbet", gf: true },
        { name: "Raspberry Sorbet", gf: true },
        { name: "Blueberry Lemon Sorbet", gf: true },
        { name: "White Choc Raspberry Truffle", gf: true },
        { name: "Salted Brown Butter Cookie", gf: false }
      ];

      var form = document.getElementById("cakeOrderForm");
      var statusMsg = document.getElementById("statusMsg");
      var submitBtn = document.getElementById("submitBtn");

      var firstFlavor = document.getElementById("firstFlavor");
      var secondFlavor = document.getElementById("secondFlavor");
      var pickupDate = document.getElementById("pickupDate");
      var earliestPickupText = document.getElementById("earliestPickupText");
      var minDateHint = document.getElementById("minDateHint");
      var pickupHour = document.getElementById("pickupHour");
      var pickupMinute = document.getElementById("pickupMinute");
      var pickupTimeHidden = document.getElementById("pickupTime");
      var firstName = document.getElementById("firstName");
      var lastName = document.getElementById("lastName");
      var phone = document.getElementById("phone");
      var messageChoice = document.getElementById("messageChoice");
      var customMessageWrap = document.getElementById("customMessageWrap");
      var specialInstructions = document.getElementById("specialInstructions");
      var charCounter = document.getElementById("charCounter");
      var cakeDesign = document.getElementById("cakeDesign");
      var cakePreviewImg = document.getElementById("cakePreviewImg");
      var cakePreviewName = document.getElementById("cakePreviewName");

      var MIN_HOUR_24 = 11;
      var MAX_HOUR_24 = 19;
      var MINUTE_OPTIONS = ["00", "15", "30", "45"];

      function pad2(n) { return (n < 10 ? "0" : "") + n; }
      function addDays(d, days) { var x = new Date(d.getTime()); x.setDate(x.getDate() + days); return x; }
      function formatLongDate(d) {
        var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
        var months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
        return days[d.getDay()] + ", " + months[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear();
      }
      function formatISODate(d) { return d.getFullYear() + "-" + pad2(d.getMonth() + 1) + "-" + pad2(d.getDate()); }
      function hourLabel(h24) { var ampm = (h24 >= 12) ? "PM" : "AM"; var h12 = h24 % 12; if (h12 === 0) h12 = 12; return h12 + " " + ampm; }

      function setStatus(text, kind) {
        statusMsg.textContent = text || "";
        statusMsg.className = "status" + (kind ? " " + kind : "");
      }

      function setEarliestPickup() {
        var today = new Date();
        var earliest = addDays(today, PROCESSING_DAYS);
        var iso = formatISODate(earliest);
        pickupDate.min = iso;
        if (!pickupDate.value) pickupDate.value = iso;
        earliestPickupText.textContent = formatLongDate(earliest);
        minDateHint.textContent = "Earliest pickup date: " + iso;
      }

      function fillFlavorSelect(selectEl) {
        selectEl.innerHTML = "";
        var opt0 = document.createElement("option");
        opt0.value = "";
        opt0.textContent = "Select a flavor";
        opt0.disabled = true;
        opt0.selected = true;
        selectEl.appendChild(opt0);

        for (var i = 0; i < flavors.length; i++) {
          var item = flavors[i] || {};
          var name = String(item.name || "").trim();
          if (!name) continue;
          var label = name + (item.gf ? "  (GF)" : "");
          var opt = document.createElement("option");
          opt.value = name;
          opt.textContent = label;
          selectEl.appendChild(opt);
        }
      }

      function capFirst(s) { s = String(s || "").trim(); if (!s) return ""; return s.charAt(0).toUpperCase() + s.slice(1); }

      function formatPhone(value) {
        var digits = String(value || "").replace(/\D/g, "").slice(0, 10);
        if (digits.length === 0) return "";
        if (digits.length < 4) return "(" + digits;
        if (digits.length < 7) return "(" + digits.slice(0,3) + ") " + digits.slice(3);
        return "(" + digits.slice(0,3) + ") " + digits.slice(3,6) + "-" + digits.slice(6);
      }

      function toggleCustomMessage() {
        var v = messageChoice.value || "";
        if (v.indexOf("Custom") === 0) customMessageWrap.style.display = "grid";
        else customMessageWrap.style.display = "none";
      }

      function updateCounter() {
        var n = (specialInstructions.value || "").length;
        charCounter.textContent = n + " / 500";
      }

      function normalizeKey(s) {
        return String(s || "").trim().replace(/\u2019/g, "'").replace(/\u2018/g, "'").replace(/\s+/g, " ");
      }

      function getCakeImageUrl(cakeName) {
        var key = normalizeKey(cakeName);
        var map = {
          "Ribbon Cake": "/assets/images/cakes/RibbonCake_Whole_041725.jpg",
          "Dulce de Leche Cake": "/assets/images/cakes/DulcedeLecheCake_Whole_041725.jpg",
          "Coffee Crunch Cake": "/assets/images/cakes/CoffeeCrunchCake_Whole_041725.jpg",
          "Rose's Birthday Cake": "/assets/images/cakes/RosesBirthdayCake_Whole_041725.jpg",
          "Reuben's Birthday Cake": "/assets/images/cakes/ReubensBirthdayCake_Whole_041725.jpg",
          "Cookies & Cream Cake": "/assets/images/cakes/CookiesAndCreamCake_Whole_041725.jpg",
          "Triple Chocolate Cake": "/assets/images/cakes/TripleChocolateCake_Whole_041725.jpg",
          "Just Because Cake": "/assets/images/cakes/JustBecauseCake_Whole_041725.jpg"
        };
        return map[key] || "/assets/images/placeholders/hd_cakes_01.png";
      }

      function updateCakePreview() {
        var selected = (cakeDesign.value || "").trim();
        if (!selected) {
          cakePreviewName.textContent = "Choose a cake design to preview";
          cakePreviewImg.src = "/assets/images/placeholders/hd_cakes_01.png";
          cakePreviewImg.alt = "";
          return;
        }
        cakePreviewName.textContent = selected;
        cakePreviewImg.src = getCakeImageUrl(selected);
        cakePreviewImg.alt = selected;
      }

      function fillTimeSelectors() {
        pickupHour.innerHTML = "";
        pickupMinute.innerHTML = "";

        var h0 = document.createElement("option");
        h0.value = "";
        h0.textContent = "Hour";
        h0.disabled = true;
        h0.selected = true;
        pickupHour.appendChild(h0);

        for (var h = MIN_HOUR_24; h <= MAX_HOUR_24; h++) {
          var optH = document.createElement("option");
          optH.value = String(h);
          optH.textContent = hourLabel(h);
          pickupHour.appendChild(optH);
        }

        var m0 = document.createElement("option");
        m0.value = "";
        m0.textContent = "Min";
        m0.disabled = true;
        m0.selected = true;
        pickupMinute.appendChild(m0);

        for (var i = 0; i < MINUTE_OPTIONS.length; i++) {
          var mm = MINUTE_OPTIONS[i];
          var optM = document.createElement("option");
          optM.value = mm;
          optM.textContent = ":" + mm;
          pickupMinute.appendChild(optM);
        }

        pickupHour.value = String(MIN_HOUR_24);
        pickupMinute.value = "00";
        syncHiddenTime();
      }

      function syncHiddenTime() {
        var h = parseInt(pickupHour.value || "0", 10);
        var m = pickupMinute.value || "";
        if (!h || !m) { pickupTimeHidden.value = ""; return; }
        pickupTimeHidden.value = pad2(h) + ":" + m;
      }

      fillFlavorSelect(firstFlavor);
      fillFlavorSelect(secondFlavor);
      setEarliestPickup();
      fillTimeSelectors();
      toggleCustomMessage();
      updateCounter();
      updateCakePreview();

      firstName.addEventListener("blur", function () { firstName.value = capFirst(firstName.value); });
      lastName.addEventListener("blur", function () { lastName.value = capFirst(lastName.value); });
      phone.addEventListener("input", function () { phone.value = formatPhone(phone.value); });
      messageChoice.addEventListener("change", toggleCustomMessage);
      specialInstructions.addEventListener("input", updateCounter);
      cakeDesign.addEventListener("change", updateCakePreview);
      pickupHour.addEventListener("change", syncHiddenTime);
      pickupMinute.addEventListener("change", syncHiddenTime);

      var submitFrame = document.getElementById("submitFrame");
      var pending = false;
      var pendingTimer = null;

      submitFrame.addEventListener("load", function () {
        if (!pending) return;
        pending = false;
        if (pendingTimer) { clearTimeout(pendingTimer); pendingTimer = null; }
        setStatus("Success. Your order request was received. A confirmation email was sent.", "ok");
        submitBtn.disabled = false;
        submitBtn.textContent = "Submit Form";
        form.reset();
        fillFlavorSelect(firstFlavor);
        fillFlavorSelect(secondFlavor);
        setEarliestPickup();
        fillTimeSelectors();
        toggleCustomMessage();
        updateCounter();
        updateCakePreview();
      });

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        setStatus("", "");
        syncHiddenTime();

        var requiredIds = [
          "firstName","lastName","phone","email","cakeDesign","cakeSize",
          "firstFlavor","secondFlavor","flavorDistribution",
          "pickupDate","pickupTime","pickupLocation","messageChoice"
        ];

        for (var i = 0; i < requiredIds.length; i++) {
          var el = document.getElementById(requiredIds[i]);
          if (!el) continue;
          if (!String(el.value || "").trim()) {
            setStatus("Please complete all required fields before submitting.", "err");
            return;
          }
        }

        pending = true;
        if (pendingTimer) clearTimeout(pendingTimer);
        pendingTimer = setTimeout(function () {
          if (!pending) return;
          pending = false;
          setStatus("Submitted. If you do not receive a confirmation email, please contact the store.", "ok");
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Form";
        }, 12000);

        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";
        setStatus("Submitting your order request...", "");

        form.action = WEB_APP_URL;
        form.method = "POST";
        form.target = "submitFrame";
        form.submit();
      });
    })();
  </script>
</body>
</html>
